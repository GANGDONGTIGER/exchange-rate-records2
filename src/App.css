/* =========================================
   1. 기본 초기화 및 글로벌 설정 (원본 유지)
   ========================================= */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-tap-highlight-color: transparent; /* 모바일 터치 하이라이트 제거 */
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    background-color: #f4f7f9;
    color: #333;
    line-height: 1.6;
    -webkit-overflow-scrolling: touch; /* 모바일 스크롤 부드럽게 */
}

#app {
    max-width: 1000px;
    margin: 40px auto;
    padding: 20px 30px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    min-height: 100vh;
}

header h1 {
    text-align: center;
    color: #2c3e50;
    margin-bottom: 30px;
    word-break: keep-all; /* 모바일에서 제목 단어 단위 줄바꿈 */
}

/* =========================================
   2. 섹션 공통 스타일
   ========================================= */
section {
    margin-bottom: 40px;
}

h2 {
    font-size: 1.2rem;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid #eee;
    color: #34495e;
}

/* =========================================
   3. 대시보드 (요약 정보)
   ========================================= */
.dashboard-section {
    margin-bottom: 40px;
}

.dashboard-grid {
    display: grid;
    /* 반응형 그리드: 최소 200px, 공간 남으면 늘어남 */
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
}

.dashboard-item {
    background-color: #f9f9f9;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 20px;
    text-align: center;
}

.dashboard-item h3 {
    font-size: 1em;
    color: #555;
    margin-bottom: 10px;
}

.dashboard-item > p, 
.dashboard-item > div {
    font-size: 1.2em;
    font-weight: bold;
    color: #2c3e50;
}

.profit { color: #e74c3c !important; }
.loss { color: #3498db !important; }

/* =========================================
   4. 한도 현황 (막대그래프)
   ========================================= */
.limit-dashboard-section {
    margin-bottom: 40px;
}

.limit-container {
    display: flex;
    gap: 20px;
    flex-wrap: wrap; /* 화면 좁으면 줄바꿈 */
}

.limit-item {
    flex: 1;
    min-width: 300px; /* 너무 좁아지지 않게 방어 */
    background-color: #fdfdfd;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 20px;
}

.limit-item h3 {
    text-align: center;
    margin-bottom: 20px;
    font-size: 1.1em;
    color: #555;
}

.limit-tracker {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    gap: 10px;
}

.tracker-label {
    width: 40px;
    font-weight: bold;
    flex-shrink: 0;
}

.progress-bar-container {
    flex-grow: 1;
    height: 28px;
    background-color: #e0e0e0;
    border-radius: 5px;
    overflow: hidden; /* 내부 채움이 삐져나가지 않게 */
}

.progress-bar-fill {
    height: 100%;
    /* width는 React 인라인 스타일로 제어됨 */
    background-color: #3498db;
    border-radius: 5px;
    transition: width 0.5s ease-in-out;
}

.tracker-remaining {
    width: 130px;
    flex-shrink: 0;
    text-align: right;
    font-size: 0.9em;
    font-weight: bold;
    color: #555;
}

/* =========================================
   5. 월별 손익 추이 (차트)
   ========================================= */
.trend-section {
    margin-bottom: 40px;
}

.chart-wrapper {
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    background-color: #fff;
    padding: 20px;
}

.chart-scroll-container {
    width: 100%;
    overflow-x: auto; /* 가로 스크롤 핵심 */
    padding-bottom: 5px;
}

.chart-content {
    height: 300px;
    /* min-width는 React 컴포넌트에서 데이터 개수에 따라 인라인으로 지정됨 */
}

/* =========================================
   6. 입력 폼 및 버튼
   ========================================= */
.form-section fieldset {
    border: 1px solid #e0e0e0;
    border-radius: 5px;
    padding: 20px;
}

.form-section legend {
    font-weight: bold;
    font-size: 1.2em;
    padding: 0 10px;
    color: #34495e;
}

.form-group {
    display: flex;
    flex-direction: column; /* 모바일 우선: 라벨 위, 입력창 아래 */
    margin-bottom: 15px;
}

/* PC에서는 가로 배치 */
@media (min-width: 769px) {
    .form-group {
        flex-direction: row;
        align-items: center;
    }
    .form-group label {
        width: 120px;
        margin-bottom: 0;
        padding-right: 15px;
    }
}

.form-group label {
    font-weight: 500;
    margin-bottom: 5px; /* 모바일용 마진 */
}

input[type="text"],
input[type="date"],
select,
textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 16px; /* iOS 확대 방지 */
    height: 42px;
}

/* 버튼 그룹 (trader, currency, type) */
.button-group {
    display: flex;
    gap: 8px;
    flex-wrap: wrap; /* 줄바꿈 허용 */
    width: 100%;
}

.btn-trader,
.btn-type,
.btn-currency {
    flex: 1; /* 균등 분할 */
    min-width: 70px; /* 최소 너비 */
    padding: 10px;
    font-size: 1em;
    font-weight: bold;
    border: 1px solid #ccc;
    background-color: #f9f9f9;
    color: #555;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-currency {
    flex: 1 1 80px; /* 통화 버튼은 조금 더 넓게 */
}

.btn-trader.active,
.btn-type.active,
.btn-currency.active {
    background-color: #34495e;
    color: white;
    border-color: #34495e;
}

/* 저장 버튼 */
button[type="submit"], button[type="button"] {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    background-color: #3498db;
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 1.1em;
    font-weight: bold;
    cursor: pointer;
}

/* 폼 내부 가로 배치 (금액, 환율 등) */
.form-row {
    display: flex;
    gap: 20px;
}

.form-row .form-group {
    flex: 1;
}

/* =========================================
   7. 환율 계산기
   ========================================= */
.calculator-section {
    margin-bottom: 40px;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    background-color: #fff;
    overflow: hidden;
}

.accordion-toggle {
    width: 100%;
    background-color: #f9f9f9;
    border: none;
    padding: 15px 20px;
    font-size: 1.1em;
    font-weight: bold;
    color: #34495e;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* 계산기 내부 시나리오 바 */
.h-bar-row {
    display: flex;
    align-items: center;
    margin-bottom: 8px;
    gap: 10px;
}

.h-bar-label {
    width: 60px;
    text-align: right;
    font-size: 0.9em;
    color: #7f8c8d;
    flex-shrink: 0;
}

.h-bar-container {
    flex-grow: 1;
    height: 24px;
    background-color: #f0f0f0;
    border-radius: 3px;
}

.h-bar-fill {
    height: 100%;
    color: white;
    font-size: 0.8em;
    line-height: 24px;
    text-align: right;
    padding-right: 5px;
    white-space: nowrap;
    transition: width 0.5s ease;
}

.h-bar-fill.profit { background-color: #e74c3c; }
.h-bar-fill.loss { background-color: #3498db; }

/* =========================================
   8. 거래 내역 (테이블 & 필터)
   ========================================= */
.list-section {
    margin-top: 40px;
}

.filter-controls {
    margin-bottom: 15px;
    display: flex;
    gap: 8px;
}

.filter-btn {
    padding: 6px 15px;
    border: 1px solid #ddd;
    background-color: #f9f9f9;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.95em;
    color: #555;
}

.filter-btn.active {
    background-color: #34495e;
    color: white;
    font-weight: bold;
}

.table-container {
    width: 100%;
    overflow-x: auto; /* 테이블 가로 스크롤 */
    -webkit-overflow-scrolling: touch;
}

.record-table {
    width: 100%;
    min-width: 600px; /* 최소 너비 보장 (찌그러짐 방지) */
    border-collapse: collapse;
    font-size: 0.95em;
}

.record-table th, .record-table td {
    padding: 12px 10px;
    border-bottom: 1px solid #ddd;
    text-align: center;
    white-space: nowrap;
}

.record-table th {
    background-color: #f2f2f2;
    font-weight: 600;
    color: #555;
}

.record-completed td {
    text-decoration: line-through;
    color: #95a5a6;
}

.pagination-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    margin-top: 20px;
}

.pagination-controls button {
    width: auto;
    padding: 8px 16px;
    background-color: #fff;
    border: 1px solid #ddd;
    color: #333;
}

/* =========================================
   9. 로딩 및 유틸리티
   ========================================= */
#loading-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(255, 255, 255, 0.7);
    display: flex; justify-content: center; align-items: center;
    z-index: 9999;
}

.spinner {
    width: 50px; height: 50px;
    border: 5px solid #f3f3f3;
    border-top: 5px solid #3498db;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* =========================================
   10. 모바일 반응형 (최종 오버라이드)
   ========================================= */
@media (max-width: 768px) {
    #app {
        margin: 10px auto;
        padding: 15px;
        width: 100%; /* 화면 꽉 차게 */
        box-shadow: none; /* 모바일은 평평하게 */
    }

    /* 폼 관련 */
    .form-row {
        flex-direction: column; /* 가로 배치된 입력창 세로로 */
        gap: 0;
    }

    /* 대시보드 */
    .dashboard-grid {
        grid-template-columns: 1fr 1fr; /* 2열 배치 */
    }

    /* 한도 현황 */
    .limit-container {
        flex-direction: column;
    }
    
    .limit-item {
        min-width: 0; /* flex 자식 넘침 방지 */
        width: 100%;
    }

    /* 계산기 */
    #calc-results-container div[style*="display: flex"] {
        flex-direction: column; /* 계산기 결과 차트 세로 배치 */
    }
}

/* src/App.css 맨 마지막에 붙여넣으세요 */

/* =========================================
   [긴급 수정] 모바일 화면 짤림/확대 방지 코드
   ========================================= */
@media (max-width: 768px) {
    /* 1. 전체 컨테이너 여백 축소 */
    #app {
        margin: 0;           /* 바깥 여백 제거 */
        padding: 15px 10px;  /* 내부 여백: 상하 15px, 좌우 10px (확 줄임) */
        width: 100%;         /* 너비 100% 강제 */
        max-width: 100vw;    /* 화면 너비 초과 금지 */
        border-radius: 0;    /* 모바일에서는 둥근 모서리 제거 */
        box-shadow: none;    /* 그림자 제거 */
        overflow-x: hidden;  /* 가로 스크롤 방지 */
    }

    /* 2. 제목 글자 크기 줄임 (스크린샷에서 너무 큼) */
    header h1 {
        font-size: 1.3rem;
        margin-bottom: 20px;
    }

    /* 3. 박스들의 최소 너비 강제 해제 (제일 중요!) */
    .dashboard-item,
    .limit-item,
    .chart-wrapper {
        min-width: 0 !important; /* 강제로 최소 너비 없앰 */
        width: 100% !important;  /* 부모 크기에 딱 맞춤 */
        margin-bottom: 15px;     /* 박스 간 간격 */
    }

    /* 4. 내부 패딩도 살짝 줄임 */
    .dashboard-item, 
    .limit-item {
        padding: 15px 10px; /* 내부 여백 축소 */
    }

    /* 5. 요약 정보 숫자 크기 조정 */
    .dashboard-item p, 
    .dashboard-item div {
        font-size: 1.1rem; /* 숫자가 너무 커서 줄바꿈 되는 것 방지 */
        word-break: break-all;
    }

    /* 6. 한도 현황 내부 게이지 조정 */
    .limit-tracker {
        gap: 5px; /* 간격 좁힘 */
    }
    .tracker-remaining {
        width: auto; /* 고정 너비 해제 */
        font-size: 0.8rem;
    }   
}
/* =========================================
   [수정] 환율 계산기 막대그래프 글자 가독성 개선
   ========================================= */

/* 수익 막대: 배경은 빨강, 글씨는 강제 흰색 */
.h-bar-fill.profit {
    background-color: #e74c3c;
    color: white !important; 
}

/* 손실 막대: 배경은 파랑, 글씨는 강제 흰색 */
.h-bar-fill.loss {
    background-color: #3498db;
    color: white !important; 
}

/* 막대 공통: 최소 너비 확보 및 그림자 추가 */
.h-bar-fill {
    min-width: 65px; /* 막대가 너무 짧아져서 숫자가 밖으로 튀어나가는 것 방지 */
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); /* 혹시라도 흰색 배경과 겹칠 때 잘 보이게 테두리 효과 */
    padding-right: 8px;
}